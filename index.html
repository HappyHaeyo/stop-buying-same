<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í•˜ëŠ˜ ì•„ë˜ ê°™ì€ ìƒ‰ì¡° ì—†ë‹¤!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        .gradient-bg { background: linear-gradient(135deg, #fce7f3 0%, #ffe4e6 50%, #fef2f2 100%); }
        .gradient-text { 
            background: linear-gradient(90deg, #db2777 0%, #dc2626 100%); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
            background-clip: text; 
        }
        .card-hover { transition: all 0.3s ease; }
        .card-hover:hover { transform: translateY(-4px); box-shadow: 0 20px 25px -5px rgba(0,0,0,0.1); }
        .btn { transition: all 0.3s ease; }
        .btn:hover { transform: translateY(-2px); }
        .overlay-gradient { background: linear-gradient(to bottom right, rgba(255,255,255,0.2), transparent); }
        .group:hover .group-hover-opacity { opacity: 1; }
        .group-hover-opacity { opacity: 0; }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <div class="max-w-7xl mx-auto p-4 md:p-8">
        <div class="text-center mb-8">
            <h1 class="text-4xl md:text-5xl font-bold gradient-text mb-2">í•˜ëŠ˜ ì•„ë˜ ê°™ì€ ìƒ‰ì¡° ì—†ë‹¤!</h1>
            <p class="text-gray-600 text-lg">ìˆëŠ” ìƒ‰ ê·¸ë§Œ ì‚¬ê¸° í”„ë¡œì íŠ¸</p>
        </div>

        <div class="bg-white rounded-2xl shadow-xl p-6 mb-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <label class="flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-pink-500 to-rose-500 text-white rounded-xl cursor-pointer hover:from-pink-600 hover:to-rose-600 btn shadow-lg font-semibold">
                    CSV ì—…ë¡œë“œ
                    <input type="file" id="csvUpload" accept=".csv" class="hidden">
                </label>
                <button id="downloadBtn" class="flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-xl hover:from-purple-600 hover:to-pink-600 btn shadow-lg font-semibold">
                    ë°±ì—… ë‹¤ìš´ë¡œë“œ
                </button>
                <button id="sampleBtn" class="flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-amber-500 to-orange-500 text-white rounded-xl hover:from-amber-600 hover:to-orange-600 btn shadow-lg font-semibold">
                    ìƒ˜í”Œ ì¶”ê°€
                </button>
                <button id="deleteAllBtn" class="flex items-center justify-center gap-2 px-4 py-3 bg-gradient-to-r from-gray-500 to-gray-600 text-white rounded-xl hover:from-gray-600 hover:to-gray-700 btn shadow-lg font-semibold">
                    ì „ì²´ ì‚­ì œ
                </button>
            </div>

            <div class="mt-6 grid grid-cols-1 md:grid-cols-4 gap-4">
                <input type="text" id="searchInput" placeholder="ë¸Œëœë“œ, ì œí’ˆëª…, ì»¬ëŸ¬ ê²€ìƒ‰..." class="px-4 py-2 border-2 border-pink-200 rounded-xl focus:border-pink-400 focus:outline-none">
                <select id="categoryFilter" class="px-4 py-2 border-2 border-pink-200 rounded-xl focus:border-pink-400 focus:outline-none">
                    <option value="all">ëª¨ë“  ì¹´í…Œê³ ë¦¬</option>
                </select>
                <select id="finishFilter" class="px-4 py-2 border-2 border-pink-200 rounded-xl focus:border-pink-400 focus:outline-none">
                    <option value="all">ëª¨ë“  í”¼ë‹ˆì‰¬</option>
                </select>
                <select id="sortSelect" class="px-4 py-2 border-2 border-pink-200 rounded-xl focus:border-pink-400 focus:outline-none">
                    <option value="color">ìƒ‰ìƒìˆœ</option>
                    <option value="brand">ë¸Œëœë“œìˆœ</option>
                </select>
            </div>
        </div>

        <div id="stats" class="bg-white rounded-2xl shadow-xl p-6 mb-6 hidden">
            <h2 class="text-xl font-bold text-gray-800 mb-4">ë‚´ ì»¬ë ‰ì…˜ í†µê³„</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-gradient-to-br from-pink-100 to-rose-100 rounded-xl p-4 text-center">
                    <div id="totalCount" class="text-3xl font-bold text-pink-600">0</div>
                    <div class="text-sm text-gray-600 mt-1">ì „ì²´ ë¦½ìŠ¤í‹±</div>
                </div>
                <div class="bg-gradient-to-br from-purple-100 to-pink-100 rounded-xl p-4 text-center">
                    <div id="categoryCount" class="text-3xl font-bold text-purple-600">0</div>
                    <div class="text-sm text-gray-600 mt-1">ì¹´í…Œê³ ë¦¬</div>
                </div>
                <div class="bg-gradient-to-br from-amber-100 to-orange-100 rounded-xl p-4 text-center">
                    <div id="finishCount" class="text-3xl font-bold text-orange-600">0</div>
                    <div class="text-sm text-gray-600 mt-1">í”¼ë‹ˆì‰¬ ì¢…ë¥˜</div>
                </div>
                <div class="bg-gradient-to-br from-red-100 to-pink-100 rounded-xl p-4 text-center">
                    <div id="brandCount" class="text-3xl font-bold text-red-600">0</div>
                    <div class="text-sm text-gray-600 mt-1">ë¸Œëœë“œ</div>
                </div>
            </div>
        </div>

        <div id="emptyState" class="bg-white rounded-2xl shadow-xl p-12 text-center">
            <div class="text-6xl mb-4">ğŸ’„</div>
            <h3 class="text-2xl font-bold text-gray-800 mb-2">ì•„ì§ ë¦½ìŠ¤í‹±ì´ ì—†ì–´ìš”!</h3>
            <p class="text-gray-600 mb-6">CSV íŒŒì¼ì„ ì—…ë¡œë“œí•˜ê±°ë‚˜ ìƒ˜í”Œ ë°ì´í„°ë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”</p>
            <div class="bg-gray-50 rounded-xl p-4 text-left max-w-md mx-auto">
                <p class="font-semibold text-gray-700 mb-2">CSV íŒŒì¼ í˜•ì‹:</p>
                <code class="text-sm text-gray-600 block">ë¸Œëœë“œ,ì œí’ˆëª…,ì»¬ëŸ¬ë²ˆí˜¸,ìƒ‰ìƒì½”ë“œ,ì¹´í…Œê³ ë¦¬,í”¼ë‹ˆì‰¬</code>
                <code class="text-sm text-gray-600 block">ë¼ì¹´,í”„ë£¨í‹° ê¸€ë¨ í‹´íŠ¸,115 ì—”ë¹„,#a0152a,í‹´íŠ¸,ê¸€ë¡œìš°</code>
            </div>
        </div>

        <div id="lipstickGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 hidden"></div>

        <div class="mt-12 text-center text-gray-500 text-sm">
            <p>ëˆ ë‚­ë¹„ ë°©ì§€ | í™˜ê²½ ë³´í˜¸ | ìŠ¤ë§ˆíŠ¸í•œ ë¦½ë•í›„ ë˜ê¸°</p>
            <p class="mt-2">ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì— ì•ˆì „í•˜ê²Œ ì €ì¥ë©ë‹ˆë‹¤</p>
        </div>
    </div>

    <script>
        var lipsticks = [];

        function loadData() {
            var saved = localStorage.getItem('lipstickCollection');
            if (saved) {
                try {
                    lipsticks = JSON.parse(saved);
                } catch (e) {
                    lipsticks = [];
                }
            }
            render();
        }

        function saveData() {
            localStorage.setItem('lipstickCollection', JSON.stringify(lipsticks));
        }

        document.getElementById('csvUpload').addEventListener('change', function(e) {
            var file = e.target.files[0];
            if (!file) return;

            var reader = new FileReader();
            reader.onload = function(event) {
                var text = event.target.result;
                var lines = text.split('\n');
                var filteredLines = [];
                
                for (var i = 0; i < lines.length; i++) {
                    if (lines[i].trim()) {
                        filteredLines.push(lines[i]);
                    }
                }
                
                var newLipsticks = [];
                for (var j = 1; j < filteredLines.length; j++) {
                    var line = filteredLines[j];
                    var parts = line.split(',');
                    var trimmedParts = [];
                    
                    for (var k = 0; k < parts.length; k++) {
                        trimmedParts.push(parts[k].trim());
                    }
                    
                    if (trimmedParts[0]) {
                        newLipsticks.push({
                            id: Date.now() + j,
                            brand: trimmedParts[0] || '',
                            name: trimmedParts[1] || '',
                            colorNum: trimmedParts[2] || '',
                            colorCode: trimmedParts[3] || '#000000',
                            category: trimmedParts[4] || 'ê¸°íƒ€',
                            finish: trimmedParts[5] || 'ê¸°íƒ€'
                        });
                    }
                }

                lipsticks = lipsticks.concat(newLipsticks);
                saveData();
                render();
                alert(newLipsticks.length + 'ê°œì˜ ë¦½ìŠ¤í‹±ì´ ì¶”ê°€ë˜ì—ˆì–´ìš”!');
            };
            reader.readAsText(file);
            e.target.value = '';
        });

        document.getElementById('downloadBtn').addEventListener('click', function() {
            if (lipsticks.length === 0) {
                alert('ì €ì¥ëœ ë¦½ìŠ¤í‹±ì´ ì—†ì–´ìš”!');
                return;
            }

            var header = 'ë¸Œëœë“œ,ì œí’ˆëª…,ì»¬ëŸ¬ë²ˆí˜¸,ìƒ‰ìƒì½”ë“œ,ì¹´í…Œê³ ë¦¬,í”¼ë‹ˆì‰¬\n';
            var rows = '';
            
            for (var i = 0; i < lipsticks.length; i++) {
                var lip = lipsticks[i];
                rows += lip.brand + ',' + lip.name + ',' + lip.colorNum + ',' + lip.colorCode + ',' + lip.category + ',' + lip.finish + '\n';
            }
            
            var blob = new Blob([header + rows], { type: 'text/csv;charset=utf-8;' });
            var link = document.createElement('a');
            link.href = URL.createObjectURL(blob);
            var date = new Date();
            var year = date.getFullYear();
            var month = date.getMonth() + 1;
            var day = date.getDate();
            var dateStr = year + '-' + month + '-' + day;
            link.download = 'lipstick_collection_' + dateStr + '.csv';
            link.click();
        });

        document.getElementById('sampleBtn').addEventListener('click', function() {
            var samples = [
                { id: Date.now() + 1, brand: 'ë¼ì¹´', name: 'í”„ë£¨í‹° ê¸€ë¨ í‹´íŠ¸', colorNum: '115 ì—”ë¹„', colorCode: '#a0152a', category: 'í‹´íŠ¸', finish: 'ê¸€ë¡œìš°' },
                { id: Date.now() + 2, brand: 'ë¡¬ì•¤', name: 'ì¥¬ì‹œë˜ìŠ¤íŒ…í‹´íŠ¸', colorNum: '06 í”¼ê·¸ë² ë¦¬', colorCode: '#D4847C', category: 'í‹´íŠ¸', finish: 'ë§¤íŠ¸' },
                { id: Date.now() + 3, brand: 'í´ë¦¬ì˜¤', name: 'ë§¤ë“œ ë§¤íŠ¸ ë¦½', colorNum: '09 ëˆ„ë“œì¸', colorCode: '#C97B63', category: 'ë¦½ìŠ¤í‹±', finish: 'ë§¤íŠ¸' },
                { id: Date.now() + 4, brand: 'ì—ë›°ë“œ', name: 'í”½ì‹±í‹´íŠ¸', colorNum: '03 ë ˆë“œì‡¼', colorCode: '#DC143C', category: 'í‹´íŠ¸', finish: 'ìƒˆë¯¸ë§¤íŠ¸' },
                { id: Date.now() + 5, brand: 'í˜ë¦¬í˜ë¼', name: 'ì‰í¬ ë” ë²¨ë²³', colorNum: '08 ì½”ë„ë¦¬ìŠ¤íŠ¸', colorCode: '#FF6B6B', category: 'í‹´íŠ¸', finish: 'ë²¨ë²³' }
            ];
            lipsticks = lipsticks.concat(samples);
            saveData();
            render();
            alert('ìƒ˜í”Œ ë°ì´í„° 5ê°œê°€ ì¶”ê°€ë˜ì—ˆì–´ìš”!');
        });

        document.getElementById('deleteAllBtn').addEventListener('click', function() {
            if (lipsticks.length === 0) {
                alert('ì‚­ì œí•  ë¦½ìŠ¤í‹±ì´ ì—†ì–´ìš”!');
                return;
            }
            if (confirm('ì •ë§ ëª¨ë“  ë¦½ìŠ¤í‹±ì„ ì‚­ì œí•˜ì‹œê² ì–´ìš”?')) {
                lipsticks = [];
                localStorage.removeItem('lipstickCollection');
                render();
                alert('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆì–´ìš”!');
            }
        });

        window.deleteLipstick = function(id) {
            var newLipsticks = [];
            for (var i = 0; i < lipsticks.length; i++) {
                if (lipsticks[i].id !== id) {
                    newLipsticks.push(lipsticks[i]);
                }
            }
            lipsticks = newLipsticks;
            saveData();
            render();
        };

        function render() {
            var searchTerm = document.getElementById('searchInput').value.toLowerCase();
            var categoryFilter = document.getElementById('categoryFilter').value;
            var finishFilter = document.getElementById('finishFilter').value;
            var sortBy = document.getElementById('sortSelect').value;

            var filtered = [];
            for (var i = 0; i < lipsticks.length; i++) {
                var lip = lipsticks[i];
                var brandLower = lip.brand.toLowerCase();
                var nameLower = lip.name.toLowerCase();
                var colorNumLower = lip.colorNum.toLowerCase();
                
                var matchSearch = brandLower.indexOf(searchTerm) !== -1 ||
                                  nameLower.indexOf(searchTerm) !== -1 ||
                                  colorNumLower.indexOf(searchTerm) !== -1;
                var matchCategory = categoryFilter === 'all' || lip.category === categoryFilter;
                var matchFinish = finishFilter === 'all' || lip.finish === finishFilter;
                
                if (matchSearch && matchCategory && matchFinish) {
                    filtered.push(lip);
                }
            }

            filtered.sort(function(a, b) {
                if (sortBy === 'color') {
                    return a.colorCode.localeCompare(b.colorCode);
                } else if (sortBy === 'brand') {
                    return a.brand.localeCompare(b.brand);
                }
                return 0;
            });

            var emptyState = document.getElementById('emptyState');
            var lipstickGrid = document.getElementById('lipstickGrid');
            var stats = document.getElementById('stats');

            if (lipsticks.length === 0) {
                emptyState.classList.remove('hidden');
                lipstickGrid.classList.add('hidden');
                stats.classList.add('hidden');
            } else {
                emptyState.classList.add('hidden');
                lipstickGrid.classList.remove('hidden');
                stats.classList.remove('hidden');

                var categoriesArr = [];
                var finishesArr = [];
                var brandsArr = [];
                
                for (var i = 0; i < lipsticks.length; i++) {
                    if (categoriesArr.indexOf(lipsticks[i].category) === -1) {
                        categoriesArr.push(lipsticks[i].category);
                    }
                    if (finishesArr.indexOf(lipsticks[i].finish) === -1) {
                        finishesArr.push(lipsticks[i].finish);
                    }
                    if (brandsArr.indexOf(lipsticks[i].brand) === -1) {
                        brandsArr.push(lipsticks[i].brand);
                    }
                }

                document.getElementById('totalCount').textContent = lipsticks.length;
                document.getElementById('categoryCount').textContent = categoriesArr.length;
                document.getElementById('finishCount').textContent = finishesArr.length;
                document.getElementById('brandCount').textContent = brandsArr.length;

                updateFilterOptions();

                var html = '';
                for (var j = 0; j < filtered.length; j++) {
                    var lip = filtered[j];
                    html += '<div class="bg-white rounded-2xl shadow-lg card-hover overflow-hidden group">';
                    html += '<div class="h-32 relative" style="background-color: ' + lip.colorCode + '">';
                    html += '<div class="absolute inset-0 overlay-gradient"></div>';
                    html += '<button onclick="deleteLipstick(' + lip.id + ')" class="absolute top-2 right-2 text-red-500 rounded-full p-2 group-hover-opacity transition-opacity shadow-lg" style="background-color: rgba(255,255,255,0.9);">ì‚­ì œ</button>';
                    html += '</div>';
                    html += '<div class="p-4">';
                    html += '<div class="flex items-center gap-2 mb-2">';
                    html += '<span class="px-2 py-1 bg-pink-100 text-pink-700 text-xs rounded-full font-semibold">' + lip.category + '</span>';
                    html += '<span class="px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-semibold">' + lip.finish + '</span>';
                    html += '</div>';
                    html += '<h3 class="font-bold text-gray-800 mb-1">' + lip.brand + '</h3>';
                    html += '<p class="text-sm text-gray-600 mb-1">' + lip.name + '</p>';
                    html += '<p class="text-sm text-gray-500">' + lip.colorNum + '</p>';
                    html += '<p class="text-xs text-gray-400 mt-2 font-mono">' + lip.colorCode + '</p>';
                    html += '</div>';
                    html += '</div>';
                }
                lipstickGrid.innerHTML = html;
            }
        }

        function updateFilterOptions() {
            var categoriesArr = [];
            var finishesArr = [];
            
            for (var i = 0; i < lipsticks.length; i++) {
                if (categoriesArr.indexOf(lipsticks[i].category) === -1) {
                    categoriesArr.push(lipsticks[i].category);
                }
                if (finishesArr.indexOf(lipsticks[i].finish) === -1) {
                    finishesArr.push(lipsticks[i].finish);
                }
            }

            var categoryFilter = document.getElementById('categoryFilter');
            var finishFilter = document.getElementById('finishFilter');

            var currentCategory = categoryFilter.value;
            var currentFinish = finishFilter.value;

            var catHtml = '<option value="all">ëª¨ë“  ì¹´í…Œê³ ë¦¬</option>';
            for (var j = 0; j < categoriesArr.length; j++) {
                catHtml += '<option value="' + categoriesArr[j] + '">' + categoriesArr[j] + '</option>';
            }
            categoryFilter.innerHTML = catHtml;
            
            var finHtml = '<option value="all">ëª¨ë“  í”¼ë‹ˆì‰¬</option>';
            for (var k = 0; k < finishesArr.length; k++) {
                finHtml += '<option value="' + finishesArr[k] + '">' + finishesArr[k] + '</option>';
            }
            finishFilter.innerHTML = finHtml;

            categoryFilter.value = currentCategory;
            finishFilter.value = currentFinish;
        }

        document.getElementById('searchInput').addEventListener('input', render);
        document.getElementById('categoryFilter').addEventListener('change', render);
        document.getElementById('finishFilter').addEventListener('change', render);
        document.getElementById('sortSelect').addEventListener('change', render);

        loadData();
    </script>
</body>
</html>
